<head>
</head>
<body>
  <button>Click me!</button>

<!-- click handler using promises in stand alone function -->
<script>
  let counter = 0;

  function startGame() {
    console.log('game is starting');
    document.querySelector('button').addEventListener('click', () => {
      ++counter;
    });

    return new Promise((resolve, reject) => {
      setTimeout(() => {
        console.log(counter);
        if (counter > 1) {
          resolve();
        } else {
          reject();
        }
      }, 2000)
    });
  }

  startGame()
    .then(() => alert('You won with ' + counter + ' clicks'))
    .catch(() => alert('Try again'));

</script>

<!--  click handler using ES5
<script>
  console.log('game is starting');
  let counter = 0;
  document.querySelector('button').addEventListener('click', () => {
    ++counter;
  });

  setTimeout(() => {
    if (counter > 5) {
      alert('You won - with ' + counter + ' clicks');
    } else {
      alert('Try again');
    }
  }, 2000);
</script>
-->
</body>
